<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="user_info_search" model="ir.ui.view">
      <field name="name">user.info.search</field>
      <field name="model">user.info</field>
      <field name="arch" type="xml">
        <search position="inside">
          <searchpanel>
            <field name="user_info_department_id" icon="fa fa-building" enable_counters="1" select="multi"/>
            <field name="user_info_major_id" icon="fa fa-graduation-cap" enable_counters="1" select="multi"/>
            <field name="user_info_class_id" icon="fa fa-users" enable_counters="1" select="multi"/>
          </searchpanel>
        </search>
      </field>
    </record>

    <!-- Form View -->
    <record id="user_info_view_form" model="ir.ui.view">
      <field name="name">user.info.form</field>
      <field name="model">user.info</field>
      <field name="arch" type="xml">
        <form >
          <header >
            <button name="button_draft" 
              type="object" 
              class="btn btn-primary" 
              string="Draft" 
              groups="manage_user_info.group_hcmut_department_admin,manage_user_info.group_hcmut_super_admin,manage_user_info.group_hcmut_technical_admin"
            />
            <button name="button_done" 
              type="object" 
              class="btn btn-primary" 
              string="Done" 
              groups="manage_user_info.group_hcmut_department_admin,manage_user_info.group_hcmut_super_admin,manage_user_info.group_hcmut_technical_admin"
            />
            <field name="states" widget="statusbar" 
            statusbar_visible="draft,done"
            />
          </header>
          <sheet>
            <group string="Basic" class="form-column">
              <group>
                <group class="avatar">
                  <field name="avatar" widget="image" options="{'size': (128, 192)}" class="oe_avatar"/>
                </group>
                <group class="user-name">
                  <field name="user_id" invisible="1"/>
                  <field name="sur_name" required="1" 
                    placeholder="'Nguyễn Văn A' thì điền 'Nguyễn Văn'" 
                    attrs="{'readonly': [('states','=','done')]}"
                  />
                  <field name="first_name" required="1" 
                    attrs="{'readonly': [('states','=','done')]}"
                    placeholder="'Nguyễn Văn A' thì điền 'A'" 
                  />
                  <field name="gender" required="1" 
                    placeholder="Vui lòng chọn"  
                  />
                  <field name="birth_date" required="1" placeholder="Theo định dạng dd/mm/yyyy"/>
                </group>
              </group>
              <group >
                <field name="phone_number" required="1"  placeholder="Vui lòng điền"/>
                <field name="personal_email" required="1"  placeholder="Vui lòng điền gmail cá nhân (@gmail.com)"/>
                <field name="religion" placeholder="Vui lòng chọn"   />
                <field name="ethnicity" placeholder="Vui lòng chọn" />
              </group>

            </group>

            <group class="form-column">
              <group string="Student info">
                <field name="user_info_department_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                <field name="user_info_academy_year" readonly="1" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}" />
                <field name="user_info_major_id" 
                  required="1" 
                  placeholder="Vui lòng chọn"  
                  options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}" 
                  attrs="{'readonly': [('states','=','done')]}"
                />
                <field name="student_id" required="1" placeholder="Vui lòng điền" attrs="{'readonly': [('states','=','done')]}"/>
                <field name="user_info_class_id" 
                  placeholder="Vui lòng chọn" 
                 
                  attrs="{
                    'invisible': [('user_info_major_id', '=', False),('student_id', '=', False)],
                    'readonly': [('states','=','done')]
                  }"
                  options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"
                  domain="['|',
                  ('year_id', '=', user_info_academy_year), ('major_id', '=', user_info_major_id)]" 
                  />
                  <!--
                  domain="[
                          '&amp;',
                            '&amp;', ('major_id', '=', 1), ('major_id', '=', user_info_major_id),
                            '&amp;', ('year_id', '=', 1), ('year_id', '=', user_info_academy_year)
                          '|',
                            '&amp;', ('major_id', '=', 1), ('major_id', '=', user_info_major_id),
                            '&amp;', ('year_id', '=', 1), ('year_id', '=', user_info_academy_year)
                   domain="['|', ('major_id', '=', False), ('major_id', '=', user_info_major_id), 
                  '|', ('year_id', '=', False), ('year_id', '=', user_info_academy_year)]" -->
              </group>
              <group string="Identity">
                <field name="national_id" required="1" placeholder="Vui lòng điền"/>
                <field name="national_id_date"  placeholder="Theo định dạng dd/mm/yyyy" />
                <field name="national_id_place" placeholder="Vui lòng điền" />
              </group>

              <group string="National Info">
                <field name="province_id_native"  placeholder="Vui lòng chọn"/>
                <field name="district_id_native"  
                  placeholder="Vui lòng chọn" 
                  domain="[('province_id', '=', province_id_native)]" 
                  options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}" 
                />
                <field name="ward_id_native"  
                  domain="[('district_id', '=', district_id_native)]" 
                  placeholder="Vui lòng chọn" 
                  options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}" 
                />
                <field name="native_address_specific" placeholder="Số nhà, Tên đường"/>
              </group>
              <group string="Permanent address">
                <field name="province_id_permanent" placeholder="Vui lòng chọn"/>
                <field name="district_id_permanent"  
                  domain="[('province_id', '=', province_id_permanent)]" 
                  placeholder="Vui lòng chọn" 
                  options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}" 
                />
                <field name="ward_id_permanent"  
                  domain="[('district_id', '=', district_id_permanent)]" 
                  placeholder="Vui lòng chọn"  
                  options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}" 
                />
                <field name="permanent_address_specific" placeholder="Số nhà, Tên đường"/>
              </group>
            </group>

            <group class="form-column">
              <group class="form-column-3" string="Youth Union">
                <field name="joined_union" />
                <field name="date_at_union"  placeholder="Theo định dạng dd/mm/yyyy"
                  attrs="{'invisible': [('joined_union', '=', False)]}"
                />
                <field name="place_union" placeholder="Vui lòng điền"
                  attrs="{'invisible': [('joined_union', '=', False)]}"
                />
              </group>
              <group class="form-column-3" string="Student Association">
                <field name="joined_student_association" />
                <field name="date_at_student_association"  placeholder="Theo định dạng dd/mm/yyyy"
                  attrs="{'invisible': [('joined_student_association', '=', False)]}"
                />
              </group>
              <group class="form-column-3" string="Communist Party">
                <field name="joined_communist_party" />
                <field name="re_date_communist_party"  placeholder="Theo định dạng dd/mm/yyyy"
                  attrs="{'invisible': [('joined_communist_party', '=', False)]}" 
                />
                <field name="offical_date_communist_party"  placeholder="Theo định dạng dd/mm/yyyy"
                  attrs="{'invisible': [('joined_communist_party', '=', False)]}" 
                />
                <field name="place_communist_party" placeholder="Vui lòng điền" 
                  attrs="{'invisible': [('joined_communist_party', '=', False)]}"
                />
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Tree(list) View -->
    <record id="user_info_view_tree" model="ir.ui.view">
      <field name="name">user.info.tree</field>
      <field name="model">user.info</field>
      <field name="arch" type="xml">
        <tree >
          <field name="name"/>
          <field name="email" />
          <field name="student_id" optional="show"/>
          <field name="phone_number" optional="hide"/>
          <field name="user_info_department_id" optional="show"/>
          <field name="user_info_major_id" optional="show"/>
          <field name="user_info_class_id"  optional="show" />
        </tree>
      </field>
    </record>
  </data>
</odoo>
